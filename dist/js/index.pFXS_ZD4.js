import{c as e,e as l,l as a,d as t,r as o,S as r,o as d,bd as i,Y as s,w as p,g as n,X as u,a1 as m,W as c,m as f,t as y,Z as h,aG as b,b3 as _,dp as v,at as g,aC as V,$ as k,a0 as w}from"./index.Buyu3njk.js";import{v as j}from"./el-loading.DxUxpi7-.js";import{E as U}from"./el-dialog.DbryiCq8.js";import{_ as T}from"./index.Dai10ccO.js";import{E as C}from"./el-input-number.DeJjfaiD.js";import"./el-tooltip.l0sNRNKZ.js";import{E}from"./el-popper.BfVBGKk4.js";import{_ as A,E as N,a as x}from"./refresh.3ZItKhR7.js";/* empty css               */import"./el-select.8_InoF5O.js";import"./el-scrollbar.Cu2msVTx.js";import"./el-tree.BraUYeL7.js";import"./el-checkbox.B5b_Jz-d.js";import{E as O}from"./el-tree-select.DuTZap5_.js";import{E as L}from"./el-card.CaBNoqdo.js";import{E as I,a as M}from"./el-table-column.CVWMIrBT.js";import{a as B,_ as q}from"./delete.0IIXIgsN.js";import{_ as G}from"./index.CKWE_OTK.js";import{_ as X}from"./plus.CgQ2C7TA.js";import{a as K,E as S}from"./el-form-item.B1EC_3Ji.js";import{_ as F}from"./search.BHW2NzeT.js";import{E as R}from"./index.DdOiTB_p.js";import"./use-dialog.1bzcfXgI.js";import"./isUndefined.DgmxjSXK.js";import"./refs.C2OHdTAj.js";import"./el-popover.5GbVq14X.js";import"./dropdown.Bis_u1sZ.js";import"./el-tab-pane.CLQ6zqYr.js";import"./strings.DYMDfDiy.js";import"./_plugin-vue_export-helper.BCo6x5W8.js";import"./isEqual.ZGBuoL13.js";import"./_Uint8Array.CYseMYDv.js";import"./debounce.BSlwRXJD.js";import"./_baseIteratee.BtCZdpFB.js";import"./index.BtWKdmvV.js";import"./castArray.N1xzF4QI.js";import"./index.CquR4N0Z.js";import"./_initCloneObject.7QVjqoR1.js";const z={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},W=[a("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896a448 448 0 0 1 0-896m23.744 191.488c-52.096 0-92.928 14.784-123.2 44.352c-30.976 29.568-45.76 70.4-45.76 122.496h80.256c0-29.568 5.632-52.8 17.6-68.992c13.376-19.712 35.2-28.864 66.176-28.864c23.936 0 42.944 6.336 56.32 19.712c12.672 13.376 19.712 31.68 19.712 54.912c0 17.6-6.336 34.496-19.008 49.984l-8.448 9.856c-45.76 40.832-73.216 70.4-82.368 89.408c-9.856 19.008-14.08 42.24-14.08 68.992v9.856h80.96v-9.856c0-16.896 3.52-31.68 10.56-45.76c6.336-12.672 15.488-24.64 28.16-35.2c33.792-29.568 54.208-48.576 60.544-55.616c16.896-22.528 26.048-51.392 26.048-86.592q0-64.416-42.24-101.376c-28.16-25.344-65.472-37.312-111.232-37.312m-12.672 406.208a54.27 54.27 0 0 0-38.72 14.784a49.4 49.4 0 0 0-15.488 38.016c0 15.488 4.928 28.16 15.488 38.016A54.85 54.85 0 0 0 523.072 768c15.488 0 28.16-4.928 38.72-14.784a51.52 51.52 0 0 0 16.192-38.72a51.97 51.97 0 0 0-15.488-38.016a55.94 55.94 0 0 0-39.424-14.784"},null,-1)];const Y={name:"ep-question-filled",render:function(a,t){return e(),l("svg",z,[...W])}};var Z=(e=>(e.CATALOG="CATALOG",e.MENU="MENU",e.BUTTON="BUTTON",e.EXTLINK="EXTLINK",e))(Z||{});const $={class:"app-container"},D={class:"search-container"},J={class:"dialog-footer"},P=t({name:"Menu",inheritAttrs:!1,__name:"index",setup(t){const z=o(K),W=o(K),P=o(!1),Q=r({title:"",visible:!1}),H=r({}),ee=o([]),le=o([]),ae=r({parentId:0,visible:1,sort:1,type:Z.MENU,alwaysShow:0,keepAlive:0}),te=r({parentId:[{required:!0,message:"请选择顶级菜单",trigger:"blur"}],name:[{required:!0,message:"请输入菜单名称",trigger:"blur"}],type:[{required:!0,message:"请选择菜单类型",trigger:"blur"}],path:[{required:!0,message:"请输入路由路径",trigger:"blur"}],component:[{required:!0,message:"请输入组件路径",trigger:"blur"}],visible:[{required:!0,message:"请输入路由路径",trigger:"blur"}]}),oe=o(),re=r({type:"",path:""});function de(){P.value=!0,v.getList(H).then((e=>{ee.value=e})).then((()=>{P.value=!1}))}function ie(){z.value.resetFields(),de()}function se(e){oe.value=e.id}function pe(e,l){v.getOptions().then((e=>{le.value=[{value:0,label:"顶级菜单",children:e}]})).then((()=>{Q.visible=!0,l?(Q.title="编辑菜单",v.getFormData(l).then((e=>{Object.assign(ae,e),re.type=e.type,re.path=e.path??""}))):(Q.title="新增菜单",ae.parentId=e)}))}function ne(){ae.type!==re.type?ae.path="":ae.path=re.path}function ue(){W.value.validate((e=>{if(e){const e=ae.id;e?v.update(e,ae).then((()=>{g.success("修改成功"),me(),de()})):v.add(ae).then((()=>{g.success("新增成功"),me(),de()}))}}))}function me(){Q.visible=!1,W.value.resetFields(),W.value.clearValidate(),ae.id=void 0,ae.parentId=0,ae.visible=1,ae.sort=1,ae.perm=void 0,ae.component=void 0,ae.path=void 0,ae.redirect=void 0,ae.alwaysShow=void 0,ae.keepAlive=void 0}return d((()=>{de()})),(t,o)=>{const r=k,d=S,oe=F,re=w,ce=A,fe=K,ye=X,he=G,be=I,_e=R,ve=B,ge=q,Ve=M,ke=L,we=O,je=N,Ue=x,Te=Y,Ce=E,Ee=C,Ae=T,Ne=U,xe=i("hasPerm"),Oe=j;return e(),l("div",$,[a("div",D,[s(fe,{ref_key:"queryFormRef",ref:z,model:n(H),inline:!0},{default:p((()=>[s(d,{label:"关键字",prop:"keywords"},{default:p((()=>[s(r,{modelValue:n(H).keywords,"onUpdate:modelValue":o[0]||(o[0]=e=>n(H).keywords=e),placeholder:"菜单名称",clearable:"",onKeyup:u(de,["enter"])},null,8,["modelValue"])])),_:1}),s(d,null,{default:p((()=>[s(re,{type:"primary",onClick:de},{icon:p((()=>[s(oe)])),default:p((()=>[m("搜索")])),_:1}),s(re,{onClick:ie},{icon:p((()=>[s(ce)])),default:p((()=>[m(" 重置")])),_:1})])),_:1})])),_:1},8,["model"])]),s(ke,{shadow:"never",class:"table-container"},{header:p((()=>[c((e(),f(re,{type:"success",onClick:o[1]||(o[1]=e=>pe(0))},{icon:p((()=>[s(ye)])),default:p((()=>[m(" 新增")])),_:1})),[[xe,["sys:menu:add"]]])])),default:p((()=>[c((e(),f(Ve,{data:n(ee),"highlight-current-row":"","row-key":"id","expand-row-keys":["1"],onRowClick:se,"tree-props":{children:"children",hasChildren:"hasChildren"}},{default:p((()=>[s(be,{label:"菜单名称","min-width":"200"},{default:p((e=>[s(he,{"icon-class":e.row.icon},null,8,["icon-class"]),m(" "+y(e.row.name),1)])),_:1}),s(be,{label:"类型",align:"center",width:"80"},{default:p((l=>[l.row.type===n(Z).CATALOG?(e(),f(_e,{key:0,type:"warning"},{default:p((()=>[m("目录")])),_:1})):h("",!0),l.row.type===n(Z).MENU?(e(),f(_e,{key:1,type:"success"},{default:p((()=>[m("菜单")])),_:1})):h("",!0),l.row.type===n(Z).BUTTON?(e(),f(_e,{key:2,type:"danger"},{default:p((()=>[m("按钮")])),_:1})):h("",!0),l.row.type===n(Z).EXTLINK?(e(),f(_e,{key:3,type:"info"},{default:p((()=>[m("外链")])),_:1})):h("",!0)])),_:1}),s(be,{label:"路由路径",align:"left",width:"150",prop:"path"}),s(be,{label:"组件路径",align:"left",width:"250",prop:"component"}),s(be,{label:"权限标识",align:"center",width:"200",prop:"perm"}),s(be,{label:"状态",align:"center",width:"80"},{default:p((l=>[1===l.row.visible?(e(),f(_e,{key:0,type:"success"},{default:p((()=>[m("显示")])),_:1})):(e(),f(_e,{key:1,type:"info"},{default:p((()=>[m("隐藏")])),_:1}))])),_:1}),s(be,{label:"排序",align:"center",width:"80",prop:"sort"}),s(be,{fixed:"right",align:"center",label:"操作",width:"220"},{default:p((l=>["CATALOG"==l.row.type||"MENU"==l.row.type?c((e(),f(re,{key:0,type:"primary",link:"",size:"small",onClick:b((e=>pe(l.row.id)),["stop"])},{default:p((()=>[s(ye),m("新增 ")])),_:2},1032,["onClick"])),[[xe,["sys:menu:add"]]]):h("",!0),c((e(),f(re,{type:"primary",link:"",size:"small",onClick:b((e=>pe(void 0,l.row.id)),["stop"])},{default:p((()=>[s(ve),m("编辑 ")])),_:2},1032,["onClick"])),[[xe,["sys:menu:edit"]]]),c((e(),f(re,{type:"primary",link:"",size:"small",onClick:b((e=>function(e){if(!e)return g.warning("请勾选删除项"),!1;V.confirm("确认删除已选中的数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{v.deleteById(e).then((()=>{g.success("删除成功"),de()}))})).catch((()=>g.info("已取消删除")))}(l.row.id)),["stop"])},{default:p((()=>[s(ge),m(" 删除 ")])),_:2},1032,["onClick"])),[[xe,["sys:menu:delete"]]])])),_:1})])),_:1},8,["data"])),[[Oe,n(P)]])])),_:1}),s(Ne,{modelValue:n(Q).visible,"onUpdate:modelValue":o[16]||(o[16]=e=>n(Q).visible=e),title:n(Q).title,"destroy-on-close":"","append-to-body":"",width:"1000px",onClose:me,top:"5vh"},{footer:p((()=>[a("div",J,[s(re,{type:"primary",onClick:ue},{default:p((()=>[m("确 定")])),_:1}),s(re,{onClick:me},{default:p((()=>[m("取 消")])),_:1})])])),default:p((()=>[s(fe,{ref_key:"menuFormRef",ref:W,model:n(ae),rules:n(te),"label-width":"160px"},{default:p((()=>[s(d,{label:"父级菜单",prop:"parentId"},{default:p((()=>[s(we,{modelValue:n(ae).parentId,"onUpdate:modelValue":o[2]||(o[2]=e=>n(ae).parentId=e),placeholder:"选择上级菜单",data:n(le),filterable:"","check-strictly":"","render-after-expand":!1},null,8,["modelValue","data"])])),_:1}),s(d,{label:"菜单名称",prop:"name"},{default:p((()=>[s(r,{modelValue:n(ae).name,"onUpdate:modelValue":o[3]||(o[3]=e=>n(ae).name=e),placeholder:"请输入菜单名称"},null,8,["modelValue"])])),_:1}),s(d,{label:"菜单类型",prop:"type"},{default:p((()=>[s(Ue,{modelValue:n(ae).type,"onUpdate:modelValue":o[4]||(o[4]=e=>n(ae).type=e),onChange:ne},{default:p((()=>[s(je,{label:"CATALOG"},{default:p((()=>[m("目录")])),_:1}),s(je,{label:"MENU"},{default:p((()=>[m("菜单")])),_:1}),s(je,{label:"BUTTON"},{default:p((()=>[m("按钮")])),_:1}),s(je,{label:"EXTLINK"},{default:p((()=>[m("外链")])),_:1})])),_:1},8,["modelValue"])])),_:1}),"EXTLINK"==n(ae).type?(e(),f(d,{key:0,label:"外链地址",prop:"path"},{default:p((()=>[s(r,{modelValue:n(ae).path,"onUpdate:modelValue":o[5]||(o[5]=e=>n(ae).path=e),placeholder:"请输入外链完整路径"},null,8,["modelValue"])])),_:1})):h("",!0),n(ae).type==n(Z).CATALOG||n(ae).type==n(Z).MENU?(e(),f(d,{key:1,label:"路由路径",prop:"path"},{default:p((()=>[n(ae).type==n(Z).CATALOG?(e(),f(r,{key:0,modelValue:n(ae).path,"onUpdate:modelValue":o[6]||(o[6]=e=>n(ae).path=e),placeholder:"system"},null,8,["modelValue"])):(e(),f(r,{key:1,modelValue:n(ae).path,"onUpdate:modelValue":o[7]||(o[7]=e=>n(ae).path=e),placeholder:"user"},null,8,["modelValue"]))])),_:1})):h("",!0),n(ae).type==n(Z).MENU?(e(),f(d,{key:2,label:"页面路径",prop:"component"},{default:p((()=>[s(r,{modelValue:n(ae).component,"onUpdate:modelValue":o[8]||(o[8]=e=>n(ae).component=e),placeholder:"system/user/index",style:{width:"95%"}},_({_:2},[n(ae).type==n(Z).MENU?{name:"prepend",fn:p((()=>[m("src/views/")])),key:"0"}:void 0,n(ae).type==n(Z).MENU?{name:"append",fn:p((()=>[m(".vue")])),key:"1"}:void 0]),1032,["modelValue"])])),_:1})):h("",!0),n(ae).type!==n(Z).BUTTON?(e(),f(d,{key:3,prop:"visible",label:"显示状态"},{default:p((()=>[s(Ue,{modelValue:n(ae).visible,"onUpdate:modelValue":o[9]||(o[9]=e=>n(ae).visible=e)},{default:p((()=>[s(je,{label:1},{default:p((()=>[m("显示")])),_:1}),s(je,{label:0},{default:p((()=>[m("隐藏")])),_:1})])),_:1},8,["modelValue"])])),_:1})):h("",!0),n(ae).type===n(Z).CATALOG||n(ae).type===n(Z).MENU?(e(),f(d,{key:4,label:"是否始终显示"},{label:p((()=>[a("div",null,[m(" 是否始终显示 "),s(Ce,{placement:"bottom",effect:"light"},{content:p((()=>[m(" 当设置为始终显示时，即使只有一个子菜单也会显示 ")])),default:p((()=>[s(Te,{class:"inline-block"})])),_:1})])])),default:p((()=>[s(Ue,{modelValue:n(ae).alwaysShow,"onUpdate:modelValue":o[10]||(o[10]=e=>n(ae).alwaysShow=e)},{default:p((()=>[s(je,{label:1},{default:p((()=>[m("是")])),_:1}),s(je,{label:0},{default:p((()=>[m("否")])),_:1})])),_:1},8,["modelValue"])])),_:1})):h("",!0),n(ae).type===n(Z).MENU?(e(),f(d,{key:5,label:"是否缓存"},{default:p((()=>[s(Ue,{modelValue:n(ae).keepAlive,"onUpdate:modelValue":o[11]||(o[11]=e=>n(ae).keepAlive=e)},{default:p((()=>[s(je,{label:1},{default:p((()=>[m("是")])),_:1}),s(je,{label:0},{default:p((()=>[m("否")])),_:1})])),_:1},8,["modelValue"])])),_:1})):h("",!0),s(d,{label:"排序",prop:"sort"},{default:p((()=>[s(Ee,{modelValue:n(ae).sort,"onUpdate:modelValue":o[12]||(o[12]=e=>n(ae).sort=e),style:{width:"100px"},"controls-position":"right",min:0},null,8,["modelValue"])])),_:1}),n(ae).type==n(Z).BUTTON?(e(),f(d,{key:6,label:"权限标识",prop:"perm"},{default:p((()=>[s(r,{modelValue:n(ae).perm,"onUpdate:modelValue":o[13]||(o[13]=e=>n(ae).perm=e),placeholder:"sys:user:add"},null,8,["modelValue"])])),_:1})):h("",!0),n(ae).type!==n(Z).BUTTON?(e(),f(d,{key:7,label:"图标",prop:"icon"},{default:p((()=>[s(Ae,{modelValue:n(ae).icon,"onUpdate:modelValue":o[14]||(o[14]=e=>n(ae).icon=e)},null,8,["modelValue"])])),_:1})):h("",!0),n(ae).type==n(Z).CATALOG?(e(),f(d,{key:8,label:"跳转路由"},{default:p((()=>[s(r,{modelValue:n(ae).redirect,"onUpdate:modelValue":o[15]||(o[15]=e=>n(ae).redirect=e),placeholder:"跳转路由"},null,8,["modelValue"])])),_:1})):h("",!0)])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])])}}});export{P as default};
