import{b as e,ba as l,d as a,O as t,a as o,A as r,bb as n,c as i,m as p,w as s,f as d,n as u,g as c,C as m,q as f,_ as g,s as b,r as y,S as k,z as h,K as v,ap as C,e as w,L as _,M as x,W as V,b3 as j,a8 as A,a1 as U,t as E,Z as R,l as $,Y as I,a3 as N,E as S,$ as z,bc as M,at as L,a0 as D,bd as F,be as q,aC as P,X as O,bf as T}from"./index.Buyu3njk.js";import{E as B}from"./el-dialog.DbryiCq8.js";import{E as Y}from"./el-scrollbar.Cu2msVTx.js";import{E as Q}from"./el-drawer.C-G6rlYV.js";import{E as Z,a as H}from"./el-form-item.B1EC_3Ji.js";import{E as W}from"./el-date-picker.DUA6Hi18.js";import{E as K}from"./el-popper.BfVBGKk4.js";/* empty css               */import{E as X,a as J}from"./el-select.8_InoF5O.js";import"./el-tree.BraUYeL7.js";import{E as G,a as ee}from"./el-checkbox.B5b_Jz-d.js";import{E as le}from"./el-tree-select.DuTZap5_.js";import{E as ae}from"./el-input-number.DeJjfaiD.js";import{E as te,a as oe,_ as re}from"./refresh.3ZItKhR7.js";import"./el-tooltip.l0sNRNKZ.js";import{v as ne}from"./el-loading.DxUxpi7-.js";import{E as ie}from"./el-card.CaBNoqdo.js";import{E as pe,a as se}from"./el-table-column.CVWMIrBT.js";import{E as de}from"./el-link.Xs1zbX_L.js";import{E as ue}from"./el-image-viewer.PtPYHGtp.js";import{E as ce}from"./el-popover.5GbVq14X.js";import{_ as me}from"./index.ZJpo3Td-.js";import{_ as fe}from"./index.CKWE_OTK.js";import{_ as ge}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{E as be}from"./index.DdOiTB_p.js";import"./use-dialog.1bzcfXgI.js";import"./isUndefined.DgmxjSXK.js";import"./refs.C2OHdTAj.js";import"./castArray.N1xzF4QI.js";import"./_Uint8Array.CYseMYDv.js";import"./_initCloneObject.7QVjqoR1.js";import"./debounce.BSlwRXJD.js";import"./index.BtWKdmvV.js";import"./isEqual.ZGBuoL13.js";import"./strings.DYMDfDiy.js";import"./_baseIteratee.BtCZdpFB.js";import"./index.CquR4N0Z.js";import"./position.CNdw7cQ6.js";import"./dropdown.Bis_u1sZ.js";const ye=e({type:{type:String,values:["primary","success","info","warning","danger",""],default:""},size:{type:String,values:l,default:""},truncated:{type:Boolean},lineClamp:{type:[String,Number]},tag:{type:String,default:"span"}}),ke=a({name:"ElText"});const he=b(g(a({...ke,props:ye,setup(e){const l=e,a=t(),g=o("text"),b=r((()=>[g.b(),g.m(l.type),g.m(a.value),g.is("truncated",l.truncated),g.is("line-clamp",!n(l.lineClamp))]));return(e,l)=>(i(),p(f(e.tag),{class:u(c(b)),style:m({"-webkit-line-clamp":e.lineClamp})},{default:s((()=>[d(e.$slots,"default")])),_:3},8,["class","style"]))}}),[["__file","text.vue"]])),ve=a({__name:"Form",props:{pk:{default:"id"},form:{},formItems:{}},setup(e,{expose:l}){const a=e,t=y(),o=k({}),n={},u=[],c=[],m=[];for(const r of a.formItems)o[r.prop]=r.initialValue??"",n[r.prop]=r.rules??[],void 0!==r.watch&&u.push({field:r.prop,func:r.watch}),void 0!==r.computed&&c.push({field:r.prop,func:r.computed}),void 0!==r.watchEffect&&m.push(r.watchEffect);return u.forEach((({field:e,func:l})=>{h((()=>o[e]),((e,a)=>{l(e,a,o)}))})),c.forEach((({field:e,func:l})=>{o[e]=r({get:()=>l(o),set(){}})})),m.forEach((e=>{v((()=>{e(o)}))})),l({formRef:t,getFormData:function(e){return void 0===e?o:o[e]??void 0},setFormData:function(e){for(const l in o)Object.hasOwn(o,l)&&l in e&&(o[l]=e[l]);Object.hasOwn(e,a.pk)&&(o[a.pk]=e[a.pk])},setFormItemData:function(e,l){o[e]=l}}),(e,l)=>{const a=C("QuestionFilled"),r=S,u=K,c=z,m=X,f=J,g=te,b=oe,y=G,k=ee,h=ae,v=le,M=W,L=he,D=Z,F=H;return i(),p(F,A({ref_key:"formRef",ref:t,"label-width":"auto"},e.form,{model:o,rules:n}),{default:s((()=>[(i(!0),w(_,null,x(e.formItems,(l=>V((i(),p(D,{key:l.prop,label:l.label,prop:l.prop},j({default:s((()=>["input"===l.type||void 0===l.type?(i(),p(c,A({key:0,modelValue:o[l.prop],"onUpdate:modelValue":e=>o[l.prop]=e,ref_for:!0},l.attrs),null,16,["modelValue","onUpdate:modelValue"])):"select"===l.type?(i(),p(f,A({key:1,modelValue:o[l.prop],"onUpdate:modelValue":e=>o[l.prop]=e,ref_for:!0},l.attrs),{default:s((()=>[(i(!0),w(_,null,x(l.options,(e=>(i(),p(m,A({key:e.value,ref_for:!0},e),null,16)))),128))])),_:2},1040,["modelValue","onUpdate:modelValue"])):"radio"===l.type?(i(),p(b,A({key:2,modelValue:o[l.prop],"onUpdate:modelValue":e=>o[l.prop]=e,ref_for:!0},l.attrs),{default:s((()=>[(i(!0),w(_,null,x(l.options,(e=>(i(),p(g,A({key:e.value,ref_for:!0},e),null,16)))),128))])),_:2},1040,["modelValue","onUpdate:modelValue"])):"checkbox"===l.type?(i(),p(k,A({key:3,modelValue:o[l.prop],"onUpdate:modelValue":e=>o[l.prop]=e,ref_for:!0},l.attrs),{default:s((()=>[(i(!0),w(_,null,x(l.options,(e=>(i(),p(y,A({key:e.value,ref_for:!0},e),null,16)))),128))])),_:2},1040,["modelValue","onUpdate:modelValue"])):"input-number"===l.type?(i(),p(h,A({key:4,modelValue:o[l.prop],"onUpdate:modelValue":e=>o[l.prop]=e,ref_for:!0},l.attrs),null,16,["modelValue","onUpdate:modelValue"])):"tree-select"===l.type?(i(),p(v,A({key:5,modelValue:o[l.prop],"onUpdate:modelValue":e=>o[l.prop]=e,ref_for:!0},l.attrs),null,16,["modelValue","onUpdate:modelValue"])):"date-picker"===l.type?(i(),p(M,A({key:6,modelValue:o[l.prop],"onUpdate:modelValue":e=>o[l.prop]=e,ref_for:!0},l.attrs),null,16,["modelValue","onUpdate:modelValue"])):"text"===l.type?(i(),p(L,A({key:7,ref_for:!0},l.attrs),{default:s((()=>[U(E(o[l.prop]),1)])),_:2},1040)):"custom"===l.type?d(e.$slots,l.slotName??l.prop,{key:8,prop:l.prop,formData:o,attrs:l.attrs}):R("",!0)])),_:2},[l.tips?{name:"label",fn:s((()=>[$("span",null,[U(E(l.label)+" ",1),I(u,{placement:"bottom",effect:"light",content:l.tips,"raw-content":!0},{default:s((()=>[I(r,{style:{"vertical-align":"-0.15em"},size:"16"},{default:s((()=>[I(a)])),_:1})])),_:2},1032,["content"])])])),key:"0"}:void 0]),1032,["label","prop"])),[[N,!l.hidden]]))),128))])),_:3},16,["model"])}}}),Ce={style:{"padding-right":"var(--el-dialog-padding-primary)"}},we=a({__name:"index",props:{modalConfig:{}},emits:["submitClick"],setup(e,{expose:l,emit:a}){const t=e,o=a,r=y(!1),n=y();let d={};const u=M((()=>{var e,l;null==(l=null==(e=n.value)?void 0:e.formRef)||l.validate((e=>{var l;if(e){const e=null==(l=n.value)?void 0:l.getFormData();"function"==typeof t.modalConfig.beforeSubmit&&t.modalConfig.beforeSubmit(e),t.modalConfig.formAction(e).then((()=>{var e,l,a,r;let n="操作成功";"drawer"===t.modalConfig.component?(null==(e=t.modalConfig.drawer)?void 0:e.title)&&(n=null==(l=t.modalConfig.drawer)?void 0:l.title):(null==(a=t.modalConfig.dialog)?void 0:a.title)&&(n=null==(r=t.modalConfig.dialog)?void 0:r.title),L.success(n),o("submitClick"),f()}))}}))}),3e3);function m(){var e;null==(e=n.value)||e.setFormData(d)}function f(){var e,l,a,t;r.value=!1,null==(l=null==(e=n.value)?void 0:e.formRef)||l.resetFields(),null==(t=null==(a=n.value)?void 0:a.formRef)||t.clearValidate()}return l({setModalVisible:function(e={}){r.value=!0,d=e}}),(e,l)=>{const a=D,t=Q,o=Y,d=B;return"drawer"===e.modalConfig.component?(i(),p(t,A({key:0,modelValue:r.value,"onUpdate:modelValue":l[0]||(l[0]=e=>r.value=e),"append-to-body":!0},e.modalConfig.drawer,{onOpen:m,onClose:f}),{footer:s((()=>[$("div",null,[I(a,{type:"primary",onClick:c(u)},{default:s((()=>[U("确 定")])),_:1},8,["onClick"]),I(a,{onClick:f},{default:s((()=>[U("取 消")])),_:1})])])),default:s((()=>[I(ve,{ref_key:"pageFormRef",ref:n,pk:e.modalConfig.pk,form:e.modalConfig.form,"form-items":e.modalConfig.formItems},null,8,["pk","form","form-items"])])),_:1},16,["modelValue"])):(i(),p(d,A({key:1,modelValue:r.value,"onUpdate:modelValue":l[1]||(l[1]=e=>r.value=e),"align-center":!0,"append-to-body":!0,width:"70vw"},e.modalConfig.dialog,{style:{"padding-right":"0"},onOpen:m,onClose:f}),{footer:s((()=>[$("div",Ce,[I(a,{type:"primary",onClick:c(u)},{default:s((()=>[U("确 定")])),_:1},8,["onClick"]),I(a,{onClick:f},{default:s((()=>[U("取 消")])),_:1})])])),default:s((()=>[I(o,{"max-height":"65vh"},{default:s((()=>[I(ve,{ref_key:"pageFormRef",ref:n,pk:e.modalConfig.pk,form:e.modalConfig.form,"form-items":e.modalConfig.formItems,style:{"padding-right":"var(--el-dialog-padding-primary)"}},null,8,["pk","form","form-items"])])),_:1})])),_:1},16,["modelValue"]))}}}),_e={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},xe=[$("path",{fill:"currentColor",d:"M600.704 64a32 32 0 0 1 30.464 22.208l35.2 109.376c14.784 7.232 28.928 15.36 42.432 24.512l112.384-24.192a32 32 0 0 1 34.432 15.36L944.32 364.8a32 32 0 0 1-4.032 37.504l-77.12 85.12a357 357 0 0 1 0 49.024l77.12 85.248a32 32 0 0 1 4.032 37.504l-88.704 153.6a32 32 0 0 1-34.432 15.296L708.8 803.904c-13.44 9.088-27.648 17.28-42.368 24.512l-35.264 109.376A32 32 0 0 1 600.704 960H423.296a32 32 0 0 1-30.464-22.208L357.696 828.48a352 352 0 0 1-42.56-24.64l-112.32 24.256a32 32 0 0 1-34.432-15.36L79.68 659.2a32 32 0 0 1 4.032-37.504l77.12-85.248a357 357 0 0 1 0-48.896l-77.12-85.248A32 32 0 0 1 79.68 364.8l88.704-153.6a32 32 0 0 1 34.432-15.296l112.32 24.256c13.568-9.152 27.776-17.408 42.56-24.64l35.2-109.312A32 32 0 0 1 423.232 64H600.64zm-23.424 64H446.72l-36.352 113.088l-24.512 11.968a294 294 0 0 0-34.816 20.096l-22.656 15.36l-116.224-25.088l-65.28 113.152l79.68 88.192l-1.92 27.136a293 293 0 0 0 0 40.192l1.92 27.136l-79.808 88.192l65.344 113.152l116.224-25.024l22.656 15.296a294 294 0 0 0 34.816 20.096l24.512 11.968L446.72 896h130.688l36.48-113.152l24.448-11.904a288 288 0 0 0 34.752-20.096l22.592-15.296l116.288 25.024l65.28-113.152l-79.744-88.192l1.92-27.136a293 293 0 0 0 0-40.256l-1.92-27.136l79.808-88.128l-65.344-113.152l-116.288 24.96l-22.592-15.232a288 288 0 0 0-34.752-20.096l-24.448-11.904L577.344 128zM512 320a192 192 0 1 1 0 384a192 192 0 0 1 0-384m0 64a128 128 0 1 0 0 256a128 128 0 0 0 0-256"},null,-1)];const Ve={name:"ep-setting",render:function(e,l){return i(),w("svg",_e,[...xe])}},je={class:"flex-x-between mb-[10px]"},Ae=a({__name:"index",props:{contentConfig:{}},emits:["addClick","exportClick","toolbarClick","editClick","operatClick"],setup(e,{expose:l,emit:a}){const t=e,o=a;l({fetchPageData:N,exportPageData:function(e={}){t.contentConfig.exportAction?t.contentConfig.exportAction(e).then((e=>{const l=e.data,a=decodeURI(e.headers["content-disposition"].split(";")[1].split("=")[1]),t=new Blob([l],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=utf-8"}),o=window.URL.createObjectURL(t),r=document.createElement("a");r.href=o,r.download=a,document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(o)})):L.error("未配置exportAction")}});const r=t.contentConfig.pk??"id",n=t.contentConfig.toolbar??["add","delete"],u=t.contentConfig.defaultToolbar??["refresh","filter"],g=y(!1),b=y([]),h=y(0),v=y([]),C=k({pageNum:1,pageSize:10});let j={};function N(e={},l=!1){g.value=!0,j=e,l&&(C.pageNum=1,C.pageSize=10),t.contentConfig.indexAction({...C,...e}).then((e=>{h.value=e.total,v.value=e.list})).finally((()=>{g.value=!1}))}function z(e){b.value=e.map((e=>e[r]))}function M(){N({},!0)}function O(e){const l=[e||b.value].join(",");l?P.confirm("确认删除?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.contentConfig.deleteAction?t.contentConfig.deleteAction(l).then((()=>{L.success("删除成功"),M()})):L.error("未配置deleteAction")})):L.warning("请勾选删除项")}function T(){N(j)}function B(e){switch(e){case"refresh":M();break;case"add":o("addClick");break;case"delete":O();break;case"export":o("exportClick");break;default:o("toolbarClick",e)}}function Y(e){switch(e.name){case"edit":o("editClick",e.row);break;case"delete":O(e.row[r]);break;default:o("operatClick",e)}}N();const Q=y({checkAll:!0,isIndeterminate:!1,checkedCols:[]}),Z=y(t.contentConfig.cols),H=e=>{Q.value.checkedCols=e?t.contentConfig.cols.map((e=>e.label)):[],Q.value.isIndeterminate=!1,Z.value=Z.value.map((l=>({...l,show:e})))},W=e=>{const l=t.contentConfig.cols.length,a=e.length;Q.value.checkAll=a===l,Q.value.isIndeterminate=a>0&&a<l,Z.value=Z.value.map((l=>({...l,show:e.includes(l.label)})))};return H(Q.value.checkAll),(e,l)=>{const a=D,t=re,o=S,r=Ve,y=G,k=ee,j=ce,N=ue,M=de,L=pe,P=se,O=ie,K=F("hasPerm"),X=ne;return i(),p(O,{shadow:"never",class:"table-container"},{default:s((()=>[$("div",je,[$("div",null,[(i(!0),w(_,null,x(c(n),(l=>(i(),w(_,{key:l},["string"==typeof l?(i(),w(_,{key:0},["add"===l?V((i(),p(a,{key:0,type:"success",icon:"plus",onClick:e=>B(l)},{default:s((()=>[U(" 新增 ")])),_:2},1032,["onClick"])),[[K,[`${e.contentConfig.pageName}:${l}`]]]):"delete"===l?V((i(),p(a,{key:1,type:"danger",icon:"delete",disabled:0===b.value.length,onClick:e=>B(l)},{default:s((()=>[U(" 删除 ")])),_:2},1032,["disabled","onClick"])),[[K,[`${e.contentConfig.pageName}:${l}`]]]):"export"===l?V((i(),p(a,{key:2,type:"primary",icon:"download",onClick:e=>B(l)},{default:s((()=>[U(" 导出 ")])),_:2},1032,["onClick"])),[[K,[`${e.contentConfig.pageName}:${l}`]]]):R("",!0)],64)):"object"==typeof l?V((i(),p(a,{key:1,icon:l.icon,type:"default",onClick:e=>B(l.name)},{default:s((()=>[U(E(l.text),1)])),_:2},1032,["icon","onClick"])),[[K,[`${e.contentConfig.pageName}:${l.auth}`]]]):R("",!0)],64)))),128))]),$("div",null,[(i(!0),w(_,null,x(c(u),(a=>(i(),w(_,{key:a},["refresh"===a?(i(),p(o,{key:0,class:"cursor-pointer ml-2",onClick:e=>B(a)},{default:s((()=>[I(t)])),_:2},1032,["onClick"])):"filter"===a?(i(),p(j,{key:1,placement:"bottom",trigger:"click"},{reference:s((()=>[I(o,{class:"cursor-pointer ml-2"},{default:s((()=>[I(r)])),_:1})])),default:s((()=>[I(y,{modelValue:Q.value.checkAll,"onUpdate:modelValue":l[0]||(l[0]=e=>Q.value.checkAll=e),indeterminate:Q.value.isIndeterminate,onChange:H},{default:s((()=>[U(" 全选 ")])),_:1},8,["modelValue","indeterminate"]),I(k,{modelValue:Q.value.checkedCols,"onUpdate:modelValue":l[1]||(l[1]=e=>Q.value.checkedCols=e),onChange:W},{default:s((()=>[(i(!0),w(_,null,x(e.contentConfig.cols,(e=>(i(),w("div",{key:e.label},[e.label?(i(),p(y,{key:0,value:e.label,label:e.label},null,8,["value","label"])):R("",!0)])))),128))])),_:1},8,["modelValue"])])),_:1})):R("",!0)],64)))),128))])]),V((i(),p(P,A(e.contentConfig.table,{data:v.value,onSelectionChange:z}),{default:s((()=>[(i(!0),w(_,null,x(Z.value,(l=>(i(),w(_,{key:l.prop},[l.show?(i(),p(L,A({key:0,ref_for:!0},l),{default:s((t=>["image"===l.templet?(i(),w(_,{key:0},[Array.isArray(t.row[l.prop])?(i(!0),w(_,{key:0},x(t.row[l.prop],((e,a)=>(i(),p(N,{key:e,src:e,"preview-src-list":t.row[l.prop],"initial-index":a,"preview-teleported":!0,style:m(`width: ${l.imageWidth??40}px; height: ${l.imageHeight??40}px`)},null,8,["src","preview-src-list","initial-index","style"])))),128)):(i(),p(N,{key:1,src:t.row[l.prop],"preview-src-list":[t.row[l.prop]],"preview-teleported":!0,style:m(`width: ${l.imageWidth??40}px; height: ${l.imageHeight??40}px`)},null,8,["src","preview-src-list","style"]))],64)):"list"===l.templet?(i(),w(_,{key:1},[U(E((l.selectList??{})[t.row[l.prop]]),1)],64)):"url"===l.templet?(i(),p(M,{key:2,type:"primary",href:t.row[l.prop],target:"_blank"},{default:s((()=>[U(E(t.row[l.prop]),1)])),_:2},1032,["href"])):"price"===l.templet?(i(),w(_,{key:3},[U(E(`${l.priceFormat??"￥"}${t.row[l.prop]}`),1)],64)):"percent"===l.templet?(i(),w(_,{key:4},[U(E(t.row[l.prop])+"% ",1)],64)):"icon"===l.templet?(i(),w(_,{key:5},[t.row[l.prop].startsWith("el-icon-")?(i(),p(o,{key:0},{default:s((()=>[(i(),p(f(t.row[l.prop].replace("el-icon-",""))))])),_:2},1024)):(i(),p(fe,{key:1,"icon-class":t.row[l.prop]},null,8,["icon-class"]))],64)):"date"===l.templet?(i(),w(_,{key:6},[U(E(c(q)(t.row[l.prop],l.dateFormat??"YYYY-MM-DD HH:mm:ss").value),1)],64)):"tool"===l.templet?(i(!0),w(_,{key:7},x(l.operat??["edit","delete"],(l=>(i(),w(_,{key:l},["string"==typeof l?(i(),w(_,{key:0},["edit"===l||"delete"===l?V((i(),p(a,{key:0,type:"edit"===l?"primary":"danger",icon:l,size:"small",link:"",onClick:e=>Y({name:l,row:t.row,column:t.column,$index:t.$index})},{default:s((()=>[U(E("edit"===l?"编辑":"删除"),1)])),_:2},1032,["type","icon","onClick"])),[[K,[`${e.contentConfig.pageName}:${l}`]]]):R("",!0)],64)):"object"==typeof l?V((i(),p(a,{key:1,icon:l.icon,type:"primary",size:"small",link:"",onClick:e=>Y({name:l.name,row:t.row,column:t.column,$index:t.$index})},{default:s((()=>[U(E(l.text),1)])),_:2},1032,["icon","onClick"])),[[K,[`${e.contentConfig.pageName}:${l.auth}`]]]):R("",!0)],64)))),128)):"custom"===l.templet?d(e.$slots,l.slotName??l.prop,A({key:8,prop:l.prop,ref_for:!0},t)):R("",!0)])),_:2},1040)):R("",!0)],64)))),128))])),_:3},16,["data"])),[[X,g.value]]),h.value>0?(i(),p(me,{key:0,total:h.value,"onUpdate:total":l[2]||(l[2]=e=>h.value=e),page:C.pageNum,"onUpdate:page":l[3]||(l[3]=e=>C.pageNum=e),limit:C.pageSize,"onUpdate:limit":l[4]||(l[4]=e=>C.pageSize=e),onPagination:T},null,8,["total","page","limit"])):R("",!0)])),_:3})}}}),Ue={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},Ee=[$("path",{fill:"currentColor",d:"M831.872 340.864L512 652.672L192.128 340.864a30.59 30.59 0 0 0-42.752 0a29.12 29.12 0 0 0 0 41.6L489.664 714.24a32 32 0 0 0 44.672 0l340.288-331.712a29.12 29.12 0 0 0 0-41.728a30.59 30.59 0 0 0-42.752 0z"},null,-1)];const Re={name:"ep-arrow-down",render:function(e,l){return i(),w("svg",Ue,[...Ee])}},$e={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},Ie=[$("path",{fill:"currentColor",d:"m488.832 344.32l-339.84 356.672a32 32 0 0 0 0 44.16l.384.384a29.44 29.44 0 0 0 42.688 0l320-335.872l319.872 335.872a29.44 29.44 0 0 0 42.688 0l.384-.384a32 32 0 0 0 0-44.16L535.168 344.32a32 32 0 0 0-46.336 0"},null,-1)];const Ne={name:"ep-arrow-up",render:function(e,l){return i(),w("svg",$e,[...Ie])}},Se={class:"search-container"},ze=ge(a({__name:"index",props:{searchConfig:{}},emits:["queryClick","resetClick"],setup(e,{expose:l,emit:a}){const t=e,o=a;l({getQueryParams:function(){return f}});const n=y(t.searchConfig.isExpandable??!0),d=y(!1),u=r((()=>!0===n.value?t.searchConfig.showNumber??3:t.searchConfig.formItems.length)),m=y(),f=k({});for(const r of t.searchConfig.formItems)f[r.prop]=r.initialValue??"";function g(){var e;null==(e=m.value)||e.resetFields(),o("resetClick",f)}function b(){o("queryClick",f)}return(e,l)=>{const a=z,t=X,o=J,r=le,y=W,k=Z,h=D,v=Ne,C=Re,j=de,E=H,$=F("hasPerm");return V((i(),w("div",Se,[I(E,{ref_key:"queryFormRef",ref:m,model:f,inline:!0},{default:s((()=>[(i(!0),w(_,null,x(e.searchConfig.formItems,((e,l)=>V((i(),p(k,{key:e.prop,label:e.label,prop:e.prop},{default:s((()=>["input"===e.type||void 0===e.type?(i(),p(a,A({key:0,modelValue:f[e.prop],"onUpdate:modelValue":l=>f[e.prop]=l,ref_for:!0},e.attrs,{onKeyup:O(b,["enter"])}),null,16,["modelValue","onUpdate:modelValue"])):"select"===e.type?(i(),p(o,A({key:1,modelValue:f[e.prop],"onUpdate:modelValue":l=>f[e.prop]=l,ref_for:!0},e.attrs),{default:s((()=>[(i(!0),w(_,null,x(e.options,(e=>(i(),p(t,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1040,["modelValue","onUpdate:modelValue"])):"tree-select"===e.type?(i(),p(r,A({key:2,modelValue:f[e.prop],"onUpdate:modelValue":l=>f[e.prop]=l,ref_for:!0},e.attrs),null,16,["modelValue","onUpdate:modelValue"])):"date-picker"===e.type?(i(),p(y,A({key:3,modelValue:f[e.prop],"onUpdate:modelValue":l=>f[e.prop]=l,ref_for:!0},e.attrs),null,16,["modelValue","onUpdate:modelValue"])):R("",!0)])),_:2},1032,["label","prop"])),[[N,!!d.value||l<c(u)]]))),128)),I(k,null,{default:s((()=>[I(h,{type:"primary",icon:"search",onClick:b},{default:s((()=>[U(" 搜索 ")])),_:1}),I(h,{icon:"refresh",onClick:g},{default:s((()=>[U("重置")])),_:1}),n.value&&e.searchConfig.formItems.length>c(u)?(i(),p(j,{key:0,class:"ml-2",type:"primary",underline:!1,onClick:l[0]||(l[0]=e=>d.value=!d.value)},{default:s((()=>[d.value?(i(),w(_,{key:0},[U(" 收起"),I(v)],64)):(i(),w(_,{key:1},[U(" 展开"),I(C)],64))])),_:1})):R("",!0)])),_:1})])),_:1},8,["model"])])),[[$,[`${e.searchConfig.pageName}:query`]]])}}}),[["__scopeId","data-v-450a2e6a"]]);const Me={pageName:"sys:user",dialog:{title:"新增用户",width:800,draggable:!0},form:{labelWidth:100},formAction:T.add,beforeSubmit(e){},formItems:[{label:"用户名",prop:"username",rules:[{required:!0,message:"用户名不能为空",trigger:"blur"}],type:"input",attrs:{placeholder:"请输入用户名"}},{label:"用户昵称",prop:"nickname",rules:[{required:!0,message:"用户昵称不能为空",trigger:"blur"}],type:"input",attrs:{placeholder:"请输入用户昵称"}},{label:"所属部门",prop:"deptId",rules:[{required:!0,message:"所属部门不能为空",trigger:"blur"}],type:"tree-select",attrs:{placeholder:"请选择所属部门",data:[{value:1,label:"有来技术",children:[{value:2,label:"研发部门"},{value:3,label:"测试部门"}]}],filterable:!0,"check-strictly":!0,"render-after-expand":!1}},{type:"select",label:"性别",prop:"gender",attrs:{placeholder:"请选择"},options:[{label:"男",value:1},{label:"女",value:2},{label:"未知",value:0}]},{label:"角色",prop:"roleIds",rules:[{required:!0,message:"用户角色不能为空",trigger:"blur"}],type:"select",attrs:{placeholder:"请选择",multiple:!0},options:[{label:"系统管理员",value:2},{label:"系统管理员1",value:4},{label:"系统管理员2",value:5},{label:"系统管理员3",value:6},{label:"系统管理员4",value:7},{label:"系统管理员5",value:8},{label:"系统管理员6",value:9},{label:"系统管理员7",value:10},{label:"系统管理员8",value:11},{label:"访问游客",value:3}]},{type:"input",label:"手机号码",prop:"mobile",rules:[{pattern:/^1[3|4|5|6|7|8|9][0-9]\d{8}$/,message:"请输入正确的手机号码",trigger:"blur"}],attrs:{placeholder:"请输入手机号码",maxlength:11}},{label:"邮箱",prop:"email",rules:[{pattern:/\w[-\w.+]*@([A-Za-z0-9][-A-Za-z0-9]+\.)+[A-Za-z]{2,14}/,message:"请输入正确的邮箱地址",trigger:"blur"}],type:"input",attrs:{placeholder:"请输入邮箱",maxlength:50}},{label:"状态",prop:"status",type:"radio",options:[{label:"正常",value:1},{label:"禁用",value:0}],initialValue:1}]},Le={pageName:"sys:user",table:{border:!0,highlightCurrentRow:!0},indexAction:function(e){if("createAt"in e){const l=e.createAt;e.startTime=l[0],e.endTime=l[1],delete e.createAt}return T.getPage(e)},deleteAction:T.deleteByIds,exportAction:T.export,pk:"id",toolbar:["add","delete","export",{name:"import",icon:"upload",text:"导入",auth:"import"}],cols:[{type:"selection",width:50,align:"center"},{label:"编号",align:"center",prop:"id",width:100},{label:"用户名",align:"center",prop:"username"},{label:"头像",align:"center",prop:"avatar",templet:"image"},{label:"用户昵称",align:"center",prop:"nickname",width:120},{label:"性别",align:"center",prop:"genderLabel",width:100},{label:"部门",align:"center",prop:"deptName",width:120},{label:"手机号码",align:"center",prop:"mobile",width:120},{label:"状态",align:"center",prop:"status",templet:"custom",slotName:"status"},{label:"创建时间",align:"center",prop:"createTime",width:180},{label:"操作",fixed:"right",width:220,templet:"tool",operat:[{name:"reset_pwd",auth:"password:reset",icon:"refresh-left",text:"重置密码"},"edit","delete"]}]},De={pageName:"sys:user",pk:"id",component:"drawer",drawer:{title:"修改用户",size:300},formAction:function(e){return T.update(e.id,e)},beforeSubmit(e){},formItems:[{label:"用户名",prop:"username",rules:[{required:!0,message:"用户名不能为空",trigger:"blur"}],type:"input",attrs:{placeholder:"请输入用户名",readonly:!0}},{label:"用户昵称",prop:"nickname",rules:[{required:!0,message:"用户昵称不能为空",trigger:"blur"}],type:"input",attrs:{placeholder:"请输入用户昵称"}},{label:"所属部门",prop:"deptId",rules:[{required:!0,message:"所属部门不能为空",trigger:"blur"}],type:"tree-select",attrs:{placeholder:"请选择所属部门",data:[{value:1,label:"有来技术",children:[{value:2,label:"研发部门"},{value:3,label:"测试部门"}]}],filterable:!0,"check-strictly":!0,"render-after-expand":!1}},{type:"select",label:"性别",prop:"gender",attrs:{placeholder:"请选择"},options:[{label:"男",value:1},{label:"女",value:2},{label:"未知",value:0}]},{label:"角色",prop:"roleIds",rules:[{required:!0,message:"用户角色不能为空",trigger:"blur"}],type:"select",attrs:{placeholder:"请选择",multiple:!0},options:[{label:"系统管理员",value:2},{label:"系统管理员1",value:4},{label:"系统管理员2",value:5},{label:"系统管理员3",value:6},{label:"系统管理员4",value:7},{label:"系统管理员5",value:8},{label:"系统管理员6",value:9},{label:"系统管理员7",value:10},{label:"系统管理员8",value:11},{label:"访问游客",value:3}]},{type:"input",label:"手机号码",prop:"mobile",rules:[{pattern:/^1[3|4|5|6|7|8|9][0-9]\d{8}$/,message:"请输入正确的手机号码",trigger:"blur"}],attrs:{placeholder:"请输入手机号码",maxlength:11}},{label:"邮箱",prop:"email",rules:[{pattern:/\w[-\w.+]*@([A-Za-z0-9][-A-Za-z0-9]+\.)+[A-Za-z]{2,14}/,message:"请输入正确的邮箱地址",trigger:"blur"}],type:"input",attrs:{placeholder:"请输入邮箱",maxlength:50}},{label:"状态",prop:"status",type:"radio",options:[{label:"正常",value:1},{label:"禁用",value:0}]}]},Fe={pageName:"sys:user",formItems:[{type:"input",label:"关键字",prop:"keywords",attrs:{placeholder:"用户名/昵称/手机号",clearable:!0,style:{width:"200px"}}},{type:"tree-select",label:"部门",prop:"deptId",attrs:{placeholder:"请选择",data:[{value:1,label:"有来技术",children:[{value:2,label:"研发部门"},{value:3,label:"测试部门"}]}],filterable:!0,"check-strictly":!0,"render-after-expand":!1,clearable:!0,style:{width:"150px"}}},{type:"select",label:"状态",prop:"status",attrs:{placeholder:"全部",clearable:!0,style:{width:"100px"}},options:[{label:"启用",value:1},{label:"禁用",value:0}]},{type:"date-picker",label:"创建时间",prop:"createAt",attrs:{type:"daterange","range-separator":"~","start-placeholder":"开始时间","end-placeholder":"截止时间","value-format":"YYYY-MM-DD",style:{width:"240px"}}}]},qe={class:"app-container"},Pe=a({__name:"index",setup(e){const{searchRef:l,contentRef:a,addModalRef:t,editModalRef:o,handleQueryClick:r,handleResetClick:n,handleAddClick:p,handleSubmitClick:d,handleExportClick:u}=function(){const e=y(),l=y(),a=y(),t=y();return{searchRef:e,contentRef:l,addModalRef:a,editModalRef:t,handleQueryClick:function(e){var a;null==(a=l.value)||a.fetchPageData(e,!0)},handleResetClick:function(){var e;null==(e=l.value)||e.fetchPageData({},!0)},handleAddClick:function(){var e;null==(e=a.value)||e.setModalVisible()},handleEditClick:function(e){var l;null==(l=t.value)||l.setModalVisible(e)},handleSubmitClick:function(){var e;null==(e=l.value)||e.fetchPageData({},!0)},handleExportClick:function(){var a,t;const o=null==(a=e.value)?void 0:a.getQueryParams();null==(t=l.value)||t.exportPageData(o)}}}();async function m(e){var l;const a=await T.getFormData(e.id);null==(l=o.value)||l.setModalVisible(a)}function f(e){"import"===e&&L.success("点击了导入按钮")}function g(e){"reset_pwd"===e.name&&P.prompt("请输入用户「"+e.row.username+"」的新密码","重置密码",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((({value:e})=>{if(!e)return L.warning("请输入新密码"),!1;L.success("密码重置成功，新密码是："+e)}))}return(e,b)=>{const y=de,k=ze,h=be,v=Ae,C=we;return i(),w("div",qe,[I(y,{href:"https://gitee.com/youlaiorg/vue3-element-admin/blob/master/src/views/demo/curd/index.vue",type:"primary",target:"_blank",class:"mb-10"},{default:s((()=>[U(" 示例源码 请点击>>>> ")])),_:1}),I(k,{ref_key:"searchRef",ref:l,"search-config":c(Fe),onQueryClick:c(r),onResetClick:c(n)},null,8,["search-config","onQueryClick","onResetClick"]),I(v,{ref_key:"contentRef",ref:a,"content-config":c(Le),onAddClick:c(p),onEditClick:m,onExportClick:c(u),onToolbarClick:f,onOperatClick:g},{status:s((e=>[I(h,{type:1==e.row[e.prop]?"success":"info"},{default:s((()=>[U(E(1==e.row[e.prop]?"启用":"禁用"),1)])),_:2},1032,["type"])])),_:1},8,["content-config","onAddClick","onExportClick"]),I(C,{ref_key:"addModalRef",ref:t,"modal-config":c(Me),onSubmitClick:c(d)},null,8,["modal-config","onSubmitClick"]),I(C,{ref_key:"editModalRef",ref:o,"modal-config":c(De),onSubmitClick:c(d)},null,8,["modal-config","onSubmitClick"])])}}});export{Pe as default};
