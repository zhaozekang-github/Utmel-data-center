import{d as e,cQ as l,c as a,m as t,w as s,g as u,e as o,Y as i,aL as r,at as n,E as m,r as p,z as d,l as c,L as f,a1 as g}from"./index.Buyu3njk.js";import{E as _,a as v}from"./el-form-item.B1EC_3Ji.js";import{E as j}from"./el-link.Xs1zbX_L.js";import{E as y}from"./el-progress.C88aaVKi.js";import{_ as V}from"./plus.CgQ2C7TA.js";import{F as h}from"./index.C42cRJKn.js";import{_ as b}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{E as w}from"./el-dialog.DbryiCq8.js";import"./castArray.N1xzF4QI.js";import"./_Uint8Array.CYseMYDv.js";import"./_initCloneObject.7QVjqoR1.js";import"./isEqual.ZGBuoL13.js";import"./use-dialog.1bzcfXgI.js";import"./isUndefined.DgmxjSXK.js";import"./refs.C2OHdTAj.js";const U=["src"],E=b(e({__name:"SingleUpload",props:{modelValue:{type:String,default:""}},emits:["update:modelValue"],setup(e,{emit:p}){const d=l(e,"modelValue",p);async function c(e){const l=await h.upload(e.file);d.value=l.url}function f(e){return!(e.size>2196608)||(n.warning("上传图片不能大于2M"),!1)}return(e,l)=>{const n=V,p=m,g=y;return a(),t(g,{modelValue:u(d),"onUpdate:modelValue":l[0]||(l[0]=e=>r(d)?d.value=e:null),class:"single-uploader","show-file-list":!1,"list-type":"picture-card","before-upload":f,"http-request":c},{default:s((()=>[u(d)?(a(),o("img",{key:0,src:u(d),class:"single-uploader__image"},null,8,U)):(a(),t(p,{key:1,class:"single-uploader__icon"},{default:s((()=>[i(n)])),_:1}))])),_:1},8,["modelValue"])}}}),[["__scopeId","data-v-816184fc"]]),q=["src"],x=e({__name:"MultiUpload",props:{modelValue:{type:Array,default:()=>[]},limit:{type:Number,default:10}},emits:["update:modelValue"],setup(e,{emit:l}){const t=l,m=e,g=p(""),_=p(!1),v=p([]);async function j(e){const l=await h.upload(e.file),a=v.value.findIndex((l=>l.uid==e.file.uid));v.value.splice(a,1,{name:l.name,url:l.url}),t("update:modelValue",v.value.map((e=>e.url)))}function b(e){const l=e.url;l&&h.deleteByPath(l).then((()=>{t("update:modelValue",v.value.map((e=>e.url)))}))}function U(e){return!(e.size>2196608)||(n.warning("上传图片不能大于2M"),!1)}d((()=>m.modelValue),(e=>{const l=v.value.map((e=>e.url));l.length>0&&l.length===e.length&&l.every((l=>e.some((e=>e===l))))&&e.every((e=>l.some((l=>l===e))))||(v.value=e.map((e=>({url:e}))))}),{immediate:!0});const E=e=>{g.value=e.url,_.value=!0};return(e,l)=>{const t=V,n=y,p=w;return a(),o(f,null,[i(n,{"file-list":u(v),"onUpdate:fileList":l[0]||(l[0]=e=>r(v)?v.value=e:null),"list-type":"picture-card","before-upload":U,"http-request":j,"on-remove":b,"on-preview":E,limit:m.limit},{default:s((()=>[i(t)])),_:1},8,["file-list","limit"]),i(p,{modelValue:u(_),"onUpdate:modelValue":l[1]||(l[1]=e=>r(_)?_.value=e:null)},{default:s((()=>[c("img",{"w-full":"",src:u(g),alt:"Preview Image"},null,8,q)])),_:1},8,["modelValue"])],64)}}}),M={class:"app-container"},I=e({__name:"upload",setup(e){const l=p("https://oss.youlai.tech/youlai-boot/2023/05/20/2b6d8b49fa1047348a0a41cef5aaf69e.gif"),t=p(["https://s2.loli.net/2023/05/24/yNsxFC8rLHMZQcK.jpg","https://s2.loli.net/2023/05/24/RuHFMwW4rG5lIqs.jpg","https://s2.loli.net/2023/05/24/ZPiGbcpR91WqInB.jpg","https://s2.loli.net/2023/05/24/e1bcnEq3MFdmlNL.jpg","https://s2.loli.net/2023/05/24/wZTSPj1yDQNcuhU.jpg"]);return(e,n)=>{const m=j,p=_,d=v;return a(),o("div",M,[i(m,{href:"https://gitee.com/youlaiorg/vue3-element-admin/blob/master/src/views/demo/upload.vue",type:"primary",target:"_blank",class:"mb-10"},{default:s((()=>[g("示例源码 请点击>>>>")])),_:1}),i(d,null,{default:s((()=>[i(p,{label:"单图上传"},{default:s((()=>[i(E,{modelValue:u(l),"onUpdate:modelValue":n[0]||(n[0]=e=>r(l)?l.value=e:null)},null,8,["modelValue"])])),_:1}),i(p,{label:"多图上传"},{default:s((()=>[i(x,{modelValue:u(t),"onUpdate:modelValue":n[1]||(n[1]=e=>r(t)?t.value=e:null)},null,8,["modelValue"])])),_:1})])),_:1})])}}});export{I as default};
